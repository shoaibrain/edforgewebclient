@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* ============================================
   FOUC Prevention - Default Dark Theme
   ============================================ */
html {
  /* Set default dark background to prevent white flash */
  background-color: oklch(0.17 0.01 255);
  /* Deep navy-black */
  color: oklch(0.95 0.005 255);
  /* Off-white text */
}

/* Ensure smooth transition when theme is applied */
html.dark {
  background-color: oklch(0.17 0.01 255);
  color: oklch(0.95 0.005 255);
}

html.light {
  background-color: oklch(0.99 0 0);
  color: oklch(0.25 0.015 255);
}

/* 
 * EdForge EMIS - Enterprise Grade Theme System
 * 
 * Color Philosophy:
 * - Primary (30%): Deep Navy Blue - Trust, Intelligence, Stability
 * - Secondary (10%): Deep Teal - Growth, Balance, Educational Progress
 * - Neutrals (60%): Off-white, Light Gray - Clarity, Professionalism
 * - Accent: Bright Cyan - Action, Modern, Attention
 * 
 * All colors are WCAG AA compliant (4.5:1 contrast minimum)
 * OKLCH color space for perceptual uniformity and accessibility
 */

@theme inline {
  /* Base System */
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  /* Typography */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* Core Brand Colors */
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  /* Accent & Action Colors */
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  /* Surface Colors */
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  /* Muted/Subtle UI */
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  /* Semantic Colors */
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-error: var(--error);
  --color-error-foreground: var(--error-foreground);
  --color-info: var(--info);
  --color-info-foreground: var(--info-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  /* Borders & Inputs */
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Chart Colors - Educational Data Visualization */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Sidebar Navigation */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Border Radius - Modern & Professional */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
}

/* ============================================
   LIGHT MODE - Professional & Clean
   ============================================ */
:root {
  /* Border Radius */
  --radius: 0.5rem;

  /* Background & Foreground */
  --background: oklch(0.98 0.01 200);
  /* Very light teal tint */
  --foreground: oklch(0.20 0.03 200);
  /* Dark teal-gray */

  /* Card Surfaces */
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.20 0.03 200);

  /* Popover Surfaces */
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.20 0.03 200);

  /* Primary - Charcoal Blue #264653 */
  --primary: oklch(0.35 0.06 230);
  --primary-foreground: oklch(0.98 0 0);

  /* Secondary - Verdigris #2a9d8f */
  --secondary: oklch(0.60 0.14 175);
  --secondary-foreground: oklch(0.98 0 0);

  /* Muted */
  --muted: oklch(0.96 0.01 200);
  --muted-foreground: oklch(0.55 0.04 200);

  /* Accent - Burnt Peach #e76f51 */
  --accent: oklch(0.65 0.18 35);
  --accent-foreground: oklch(0.98 0 0);

  /* Semantic Colors */
  --success: oklch(0.60 0.14 175);
  /* Using Verdigris for success */
  --success-foreground: oklch(0.98 0 0);
  --warning: oklch(0.85 0.16 85);
  /* Jasmine/Sandy Brown mix */
  --warning-foreground: oklch(0.20 0.03 200);
  --error: oklch(0.65 0.18 35);
  /* Using Accent for error */
  --error-foreground: oklch(0.98 0 0);
  --info: oklch(0.35 0.06 230);
  /* Using Primary for info */
  --info-foreground: oklch(0.98 0 0);
  --destructive: oklch(0.65 0.18 35);
  --destructive-foreground: oklch(0.98 0 0);

  /* Borders & Inputs */
  --border: oklch(0.90 0.02 200);
  --input: oklch(0.90 0.02 200);
  --ring: oklch(0.35 0.06 230);

  /* Chart Colors */
  --chart-1: oklch(0.65 0.18 35);
  /* Burnt Peach */
  --chart-2: oklch(0.60 0.14 175);
  /* Verdigris */
  --chart-3: oklch(0.85 0.16 85);
  /* Jasmine */
  --chart-4: oklch(0.75 0.15 55);
  /* Sandy Brown */
  --chart-5: oklch(0.35 0.06 230);
  /* Charcoal Blue */

  /* Sidebar Navigation */
  --sidebar: oklch(0.98 0.01 200);
  --sidebar-foreground: oklch(0.20 0.03 200);
  --sidebar-primary: oklch(0.35 0.06 230);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent: oklch(0.94 0.02 200);
  --sidebar-accent-foreground: oklch(0.20 0.03 200);
  --sidebar-border: oklch(0.90 0.02 200);
  --sidebar-ring: oklch(0.35 0.06 230);
}

/* ============================================
   DARK MODE - Elegant & Eye-friendly
   ============================================ */
.dark {
  /* Background & Foreground */
  --background: oklch(0.18 0.04 230);
  /* Darker Charcoal Blue */
  --foreground: oklch(0.95 0.01 200);

  /* Card Surfaces */
  --card: oklch(0.22 0.04 230);
  --card-foreground: oklch(0.95 0.01 200);

  /* Popover Surfaces */
  --popover: oklch(0.22 0.04 230);
  --popover-foreground: oklch(0.95 0.01 200);

  /* Primary - Charcoal Blue (Lighter for dark mode) */
  --primary: oklch(0.45 0.06 230);
  --primary-foreground: oklch(0.98 0 0);

  /* Secondary - Verdigris */
  --secondary: oklch(0.60 0.14 175);
  --secondary-foreground: oklch(0.98 0 0);

  /* Muted */
  --muted: oklch(0.25 0.04 230);
  --muted-foreground: oklch(0.70 0.04 200);

  /* Accent - Burnt Peach */
  --accent: oklch(0.65 0.18 35);
  --accent-foreground: oklch(0.98 0 0);

  /* Semantic Colors */
  --success: oklch(0.60 0.14 175);
  --success-foreground: oklch(0.98 0 0);
  --warning: oklch(0.85 0.16 85);
  --warning-foreground: oklch(0.20 0.03 200);
  --error: oklch(0.65 0.18 35);
  --error-foreground: oklch(0.98 0 0);
  --info: oklch(0.45 0.06 230);
  --info-foreground: oklch(0.98 0 0);
  --destructive: oklch(0.65 0.18 35);
  --destructive-foreground: oklch(0.98 0 0);

  /* Borders & Inputs */
  --border: oklch(0.30 0.04 230);
  --input: oklch(0.30 0.04 230);
  --ring: oklch(0.45 0.06 230);

  /* Chart Colors */
  --chart-1: oklch(0.65 0.18 35);
  /* Burnt Peach */
  --chart-2: oklch(0.60 0.14 175);
  /* Verdigris */
  --chart-3: oklch(0.85 0.16 85);
  /* Jasmine */
  --chart-4: oklch(0.75 0.15 55);
  /* Sandy Brown */
  --chart-5: oklch(0.45 0.06 230);
  /* Charcoal Blue (Lighter) */

  /* Sidebar Navigation */
  --sidebar: oklch(0.15 0.04 230);
  /* Darker than bg */
  --sidebar-foreground: oklch(0.90 0.01 200);
  --sidebar-primary: oklch(0.45 0.06 230);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent: oklch(0.25 0.04 230);
  --sidebar-accent-foreground: oklch(0.90 0.01 200);
  --sidebar-border: oklch(0.25 0.04 230);
  --sidebar-ring: oklch(0.45 0.06 230);
}

/* ============================================
   BASE STYLES
   ============================================ */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  :root {
    /* Grid Pattern - Subtle and premium */
    --pattern-grid: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(255 255 255 / 0.04)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");

    /* Noise Texture - Adds grain and realism */
    --pattern-noise: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
  }

  body {
    @apply bg-background text-foreground antialiased relative min-h-screen overflow-x-hidden;
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
  }

  /* Mesh Gradient Background */
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: -2;
    background:
      radial-gradient(circle at 15% 50%, oklch(0.35 0.06 230 / 0.8), transparent 25%),
      radial-gradient(circle at 85% 30%, oklch(0.65 0.18 35 / 0.15), transparent 25%),
      radial-gradient(circle at 50% 80%, oklch(0.60 0.14 175 / 0.15), transparent 40%);
    filter: blur(60px);
  }

  /* Grid & Noise Overlay */
  body::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: -1;
    background-image: var(--pattern-grid), var(--pattern-noise);
    mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
    -webkit-mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
  }

  /* Utility to ensure transparency on components */
  .bg-transparent-gradient {
    background: transparent;
  }

  /* Smooth transitions for theme switching */
  * {
    transition-property: color, background-color, border-color;
    transition-duration: 200ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Typography hierarchy for enterprise EMIS */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-sans font-semibold tracking-tight;
  }

  /* Focus visible for accessibility */
  *:focus-visible {
    @apply outline-2 outline-ring outline-offset-2;
  }

  /* Selection colors */
  ::selection {
    @apply bg-primary/20 text-foreground;
  }

  /* Custom Scrollbar Styling for Enterprise Feel */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: oklch(0.65 0.02 255);
    /* Subtle gray */
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: oklch(0.55 0.02 255);
    /* Darker on hover */
    background-clip: content-box;
  }

  /* Dark mode scrollbar */
  .dark ::-webkit-scrollbar-thumb {
    background: oklch(0.45 0.02 255);
    /* Darker for dark mode */
    background-clip: content-box;
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: oklch(0.55 0.02 255);
    /* Lighter on hover in dark mode */
    background-clip: content-box;
  }

  /* Sidebar-specific scrollbar styling */
  .sidebar-scroll::-webkit-scrollbar {
    width: 6px;
  }

  .sidebar-scroll::-webkit-scrollbar-thumb {
    background: oklch(0.35 0.02 255);
    /* Even more subtle for sidebar */
    border-radius: 3px;
    border: 1px solid transparent;
    background-clip: content-box;
  }

  .sidebar-scroll::-webkit-scrollbar-thumb:hover {
    background: oklch(0.45 0.02 255);
    background-clip: content-box;
  }

  /* Firefox scrollbar styling */
  * {
    scrollbar-width: thin;
    scrollbar-color: oklch(0.65 0.02 255) transparent;
  }

  .dark * {
    scrollbar-color: oklch(0.45 0.02 255) transparent;
  }

  .sidebar-scroll {
    scrollbar-width: thin;
    scrollbar-color: oklch(0.35 0.02 255) transparent;
  }

  /* Loading skeleton animations */
  @keyframes skeleton-pulse {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.5;
    }
  }

  .skeleton {
    animation: skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Smooth transitions for sidebar collapse */
  .sidebar-transition {
    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* 
 ---break---
 */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* <CHANGE> Added custom scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: oklch(0.08 0.01 264);
}

::-webkit-scrollbar-thumb {
  background: oklch(0.3 0.05 264);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: oklch(0.4 0.08 264);
}